import{_ as V}from"./_plugin-vue_export-helper-Dsr6SDXj.js";import{o as F}from"./order-Bd6EpsEf.js";import{t as S}from"./tracking-C5e2jErE.js";import{d as T,r as H,f as g,o as L,_ as y,k as t,U as o,W as a,V as c,u as _,a1 as u,S as v,a2 as E,G as M,a3 as p,F as U,a5 as W,$ as J}from"./vue-vendor-DGayM9PE.js";import{S as K,k as P,C as X,G as Y,l as Z}from"./ant-design-Ce2DOam0.js";import"./utils-BsVK5D5E.js";const ee={class:"dashboard-page"},te={class:"timeline-item"},ae={class:"timeline-title"},oe={class:"timeline-description"},ne={class:"timeline-meta"},se=T({__name:"index",setup(I){const h=J(),r=H({totalOrders:0,activeOrders:0,completedOrders:0,totalQuantity:0,inTransitQuantity:0,totalVessels:0,activeVessels:0,totalCarriers:0,activeCarriers:0}),f=g(!1),x=g([]),k=g([]),$=[{title:"订单编号",dataIndex:"id",key:"id"},{title:"客户名称",dataIndex:"customerName",key:"customerName"},{title:"数量",key:"quantity",customRender:({record:e})=>"".concat(e.quantity," ").concat(e.unit)},{title:"状态",key:"status"},{title:"操作",key:"action"}];async function b(){try{const e=await S.getStatistics();e.code===200&&Object.assign(r,e.data)}catch(e){console.error("获取统计数据失败",e)}}async function C(){f.value=!0;try{const e=await F.getOrders({page:1,pageSize:5});e.code===200&&(x.value=e.data.list)}catch(e){console.error("获取最近订单失败",e)}finally{f.value=!1}}async function O(){try{const e=await S.getTimeline({});e.code===200&&(k.value=e.data.slice(0,10))}catch(e){console.error("获取时间线失败",e)}}function N(e){h.push("/tracking/".concat(e.id))}function D(e){return{pending:"default",confirmed:"blue",producing:"processing",warehousing:"orange",transporting:"cyan",shipped:"purple",completed:"success",cancelled:"error"}[e]||"default"}function B(e){return{pending:"待确认",confirmed:"已确认",producing:"生产中",warehousing:"集货中",transporting:"运输中",shipped:"已发货",completed:"已完成",cancelled:"已取消"}[e]||e}function z(e){return{success:"green",warning:"orange",error:"red",info:"blue"}[e]||"blue"}function G(e){return Z(e).format("MM-DD HH:mm")}return L(()=>{b(),C(),O();const e=setInterval(()=>{b(),C(),O()},3e4);return()=>{clearInterval(e)}}),(e,s)=>{const d=o("a-statistic"),l=o("a-card"),i=o("a-col"),w=o("a-row"),Q=o("a-tag"),R=o("a-button"),j=o("a-table"),q=o("a-timeline-item"),A=o("a-timeline");return c(),y("div",ee,[t(w,{gutter:16,style:{"margin-bottom":"16px"}},{default:a(()=>[t(i,{span:6},{default:a(()=>[t(l,null,{default:a(()=>[t(d,{title:"总订单数",value:r.totalOrders,"value-style":{color:"#3f8600"}},{prefix:a(()=>[t(_(K))]),_:1},8,["value"])]),_:1})]),_:1}),t(i,{span:6},{default:a(()=>[t(l,null,{default:a(()=>[t(d,{title:"进行中订单",value:r.activeOrders,"value-style":{color:"#1890ff"}},{prefix:a(()=>[t(_(P),{spin:""})]),_:1},8,["value"])]),_:1})]),_:1}),t(i,{span:6},{default:a(()=>[t(l,null,{default:a(()=>[t(d,{title:"总数量（吨）",value:r.totalQuantity,"value-style":{color:"#cf1322"}},{prefix:a(()=>[t(_(X))]),suffix:a(()=>[...s[0]||(s[0]=[u("span",null,"吨",-1)])]),_:1},8,["value"])]),_:1})]),_:1}),t(i,{span:6},{default:a(()=>[t(l,null,{default:a(()=>[t(d,{title:"在航船舶",value:r.activeVessels,"value-style":{color:"#722ed1"}},{prefix:a(()=>[t(_(Y))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1}),t(w,{gutter:16},{default:a(()=>[t(i,{span:16},{default:a(()=>[t(l,{title:"最近订单",bordered:!1},{default:a(()=>[t(j,{columns:$,"data-source":x.value,loading:f.value,pagination:!1,size:"small","row-key":"id"},{bodyCell:a(({column:n,record:m})=>[n.key==="status"?(c(),v(Q,{key:0,color:D(m.status)},{default:a(()=>[M(p(B(m.status)),1)]),_:2},1032,["color"])):n.key==="action"?(c(),v(R,{key:1,type:"link",size:"small",onClick:ce=>N(m)},{default:a(()=>[...s[1]||(s[1]=[M("查看追踪",-1)])]),_:1},8,["onClick"])):E("",!0)]),_:1},8,["data-source","loading"])]),_:1})]),_:1}),t(i,{span:8},{default:a(()=>[t(l,{title:"最新动态",bordered:!1},{default:a(()=>[t(A,{style:{"max-height":"400px","overflow-y":"auto"}},{default:a(()=>[(c(!0),y(U,null,W(k.value,n=>(c(),v(q,{key:n.id,color:z(n.status)},{default:a(()=>[u("div",te,[u("div",ae,p(n.title),1),u("div",oe,p(n.description),1),u("div",ne,p(G(n.timestamp)),1)])]),_:2},1032,["color"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})])}}}),re=V(se,[["__scopeId","data-v-4c048fc9"]]),le={class:"home-page"},ie=T({__name:"index",setup(I){return(h,r)=>(c(),y("div",le,[t(re)]))}}),ge=V(ie,[["__scopeId","data-v-7ce36eec"]]);export{ge as default};
