import{a0 as h,f as d,c as U,d as I,w as M,S as C,W as t,U as s,V as y,k as o,a1 as i,_ as N,a2 as b,u as r,B as H,G as x,a3 as $,$ as j,a4 as A}from"./vue-vendor-DGayM9PE.js";import{u as E}from"./user-DwWTVLZa.js";import{_ as R}from"./_plugin-vue_export-helper-C_sFg2ed.js";import{H as T,S as F,M as G,j as P,U as W,D as q}from"./ant-design-Ce2DOam0.js";import"./utils-BsVK5D5E.js";const z="/tu-0121/assets/img/logo-alKEKSHC.svg",J=h("user",()=>{const p=d(null),l=d(""),c=d(!1),f=U(()=>!!l.value),a=U(()=>{var u;return((u=p.value)==null?void 0:u.role)==="admin"});async function m(u){c.value=!0;try{const _=await E.login(u);p.value=_.data,l.value=_.data.token,localStorage.setItem("token",l.value)}finally{c.value=!1}}function g(){p.value=null,l.value="",localStorage.removeItem("token")}return{user:p,token:l,loading:c,isLoggedIn:f,isAdmin:a,login:m,logout:g}}),Q={class:"logo"},X={key:0},Y={class:"header-right"},Z=I({__name:"DefaultLayout",setup(p){const l=j(),c=A(),f=J(),a=d(!1),m=d(["/home"]),g=d([]);M(()=>c.path,v=>{const e=v.split("/").slice(0,2).join("/");m.value=[e]},{immediate:!0});function u(){a.value=!a.value}function _(v){l.push(v)}function K(){f.logout(),l.push("/login")}return(v,e)=>{const k=s("a-menu-item"),w=s("a-menu"),O=s("a-layout-sider"),B=s("a-dropdown"),D=s("a-layout-header"),L=s("router-view"),V=s("a-layout-content"),S=s("a-layout");return y(),C(S,{class:"app-layout"},{default:t(()=>[o(O,{collapsed:a.value,"onUpdate:collapsed":e[4]||(e[4]=n=>a.value=n),trigger:null,collapsible:""},{default:t(()=>[i("div",Q,[e[6]||(e[6]=i("img",{src:z,alt:"Logo",class:"logo-img"},null,-1)),a.value?b("",!0):(y(),N("h2",X,"物流供应链"))]),o(w,{"selected-keys":m.value,"onUpdate:selectedKeys":e[2]||(e[2]=n=>m.value=n),"open-keys":g.value,"onUpdate:openKeys":e[3]||(e[3]=n=>g.value=n),mode:"inline",theme:"dark","inline-collapsed":a.value},{default:t(()=>[o(k,{key:"/home",onClick:e[0]||(e[0]=n=>_("/home"))},{icon:t(()=>[o(r(T))]),default:t(()=>[e[7]||(e[7]=i("span",null,"首页",-1))]),_:1}),o(k,{key:"/order",onClick:e[1]||(e[1]=n=>_("/order"))},{icon:t(()=>[o(r(F))]),default:t(()=>[e[8]||(e[8]=i("span",null,"订单管理",-1))]),_:1})]),_:1},8,["selected-keys","open-keys","inline-collapsed"])]),_:1},8,["collapsed"]),o(S,null,{default:t(()=>[o(D,{class:"header"},{default:t(()=>[a.value?(y(),C(r(G),{key:0,class:"trigger",onClick:u})):(y(),C(r(P),{key:1,class:"trigger",onClick:u})),i("div",Y,[o(B,null,{overlay:t(()=>[o(w,null,{default:t(()=>[o(k,{key:"logout",onClick:K},{default:t(()=>[...e[9]||(e[9]=[x("退出登录",-1)])]),_:1})]),_:1})]),default:t(()=>{var n;return[i("a",{class:"ant-dropdown-link",onClick:e[5]||(e[5]=H(()=>{},["prevent"]))},[o(r(W),{style:{"margin-right":"8px"}}),x(" "+$(((n=r(f).user)==null?void 0:n.name)||"用户")+" ",1),o(r(q))])]}),_:1})])]),_:1}),o(V,{class:"content"},{default:t(()=>[o(L)]),_:1})]),_:1})]),_:1})}}}),le=R(Z,[["__scopeId","data-v-bac1e587"]]);export{le as default};
