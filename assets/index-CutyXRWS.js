import{d as J,f as u,o as j,b as D,_ as d,a0 as t,a1 as c,k as g,W as k,u as w,F as G,a2 as Z,a3 as f,V as i,G as b,a4 as L,a5 as H}from"./vue-vendor-CWu0UK2c.js";import{B as M}from"./ant-design-ZfMx33Ln.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-BxAtuLby.js";const O={class:"map-visualization"},U={class:"layer-control"},q={class:"timeline-container"},Q={class:"timeline"},X=["onClick"],Y={class:"timeline-label"},aa={key:0},sa={key:0,class:"info-panel left"},ea={class:"panel-header"},na={key:1,class:"info-panel right"},ta={class:"panel-header"},la={key:1,class:"info-panels wuhan-merged"},da={key:0},ia={key:0,class:"info-panel left"},oa={class:"panel-header"},va={key:1,class:"info-panel right"},pa={class:"panel-header"},ra={key:1,class:"info-panels maanshan-merged"},ca=J({__name:"index",setup(ua){const y=u(null),x=u(null),P=u(null),C=u(null);let e=null,A=null,_=null,S=u("satellite");const v=[{name:"武汉港",lng:114.30546,lat:30.593099},{name:"马鞍山港",lng:118.492839,lat:31.678246},{name:"上海崇明岛港",lng:121.513867,lat:31.656222}],I=[{label:"01/15 12:00",portIndex:0},{label:"01/19 12:00",portIndex:1},{label:"01/20 12:00",portIndex:2}],l=u(0),p=u({wuhan:{left:!0,right:!0},maanshan:{left:!0,right:!0}});let r=null,m=null;const B=()=>{if(!y.value)return;const s=document.createElement("script"),a="8940d994cb3eeea3ae13fb33c34c0fd9";s.src="https://webapi.amap.com/maps?v=2.0&key=".concat(a,"&plugin=AMap.ToolBar"),s.onload=()=>{if(!window.AMap){console.error("高德地图API加载失败");return}try{e=new window.AMap.Map(y.value,{center:[v[0].lng,v[0].lat],zoom:10,mapStyle:"amap://styles/normal"}),A=new window.AMap.TileLayer.Satellite,_=new window.AMap.TileLayer,A.setMap(e),_.setMap(e);const n=new window.AMap.Bounds([73,4],[135,53]);e.setLimitBounds(n),e.addControl(new window.AMap.ToolBar),R(),z(),N(),$(0),T(),e.on("moveend",T),e.on("zoomend",T)}catch(n){console.error("地图初始化失败:",n),y.value&&(y.value.innerHTML='\n          <div style="width: 100%; height: 100%; background: #f0f0f0; display: flex; flex-direction: column; justify-content: center; align-items: center;">\n            <h2 style="color: #333; margin-bottom: 10px;">地图可视化（模拟）</h2>\n            <p style="color: #666; margin-bottom: 20px;">当前港口：'.concat(v[I[l.value].portIndex].name,'</p>\n            <div style="width: 300px; height: 200px; background: #e0e0e0; border-radius: 4px; display: flex; justify-content: center; align-items: center;">\n              <span style="color: #999;">地图显示区域</span>\n            </div>\n          </div>\n        ')),e={setCenter:()=>{},setZoom:()=>{}},r={setMap:()=>{},setOptions:()=>{}},m={setPosition:()=>{}}}},document.body.appendChild(s)},R=()=>{v.forEach(s=>{new window.AMap.Marker({position:[s.lng,s.lat],title:s.name,map:e})})},z=()=>{const s=[[114.30546,30.593099],[114.5,30.58],[114.87083,30.49556],[114.9,30.35],[115.025,30.21333],[115.3,30],[115.5,29.85],[115.895,29.71361],[116.2,29.9],[116.5,30.1],[116.8,30.3],[117.03639,30.51611],[117.4,30.7],[117.6,30.85],[117.81028,30.93917],[117.82,31.05],[117.82611,31.265],[118,31.3],[118.15,31.32],[118.38472,31.33694],[118.35,31.38],[118.27972,31.41417],[118.35,31.55],[118.492839,31.678246],[118.6,31.85],[118.76556,32.06417],[119,32.1],[119.2,32.15],[119.41611,32.2],[119.43,32.3],[119.44306,32.39028],[119.6,32.38],[119.75,32.36],[119.90694,32.34278],[120.2,32.3],[120.5,32.2],[120.85,32.08333],[121,32],[121.1525,31.94306],[121.2,31.9],[121.24583,31.88611],[121.3,31.7],[121.4,31.5],[121.47222,31.23611],[121.49,31.45],[121.513867,31.656222]];r=new window.AMap.Polyline({path:s,strokeColor:"#0088FF",strokeWeight:5,strokeStyle:"solid",map:e,lineJoin:"round",lineCap:"round"})},N=()=>{m=new window.AMap.Marker({position:[v[0].lng,v[0].lat],icon:new window.AMap.Icon({size:new window.AMap.Size(32,32),image:"https://cdn.jsdelivr.net/npm/@amap/amap-jsapi-loader@1.0.1/images/ship.png",imageSize:new window.AMap.Size(32,32)}),map:e,offset:new window.AMap.Pixel(-16,-16)})},V=()=>{e&&(S.value==="satellite"?(A.setMap(null),_.setMap(e),S.value="normal"):(_.setMap(null),A.setMap(e),S.value="satellite"))},$=s=>{l.value=s;const a=v[I[s].portIndex];e.setCenter([a.lng,a.lat]),e.setZoom(10),W(),E()},W=()=>{const s=[[114.30546,30.593099],[114.5,30.58],[114.87083,30.49556],[114.9,30.35],[115.025,30.21333],[115.3,30],[115.5,29.85],[115.895,29.71361],[116.2,29.9],[116.5,30.1],[116.8,30.3],[117.03639,30.51611],[117.4,30.7],[117.6,30.85],[117.81028,30.93917],[117.82,31.05],[117.82611,31.265],[118,31.3],[118.15,31.32],[118.38472,31.33694],[118.35,31.38],[118.27972,31.41417],[118.35,31.55],[118.492839,31.678246],[118.6,31.85],[118.76556,32.06417],[119,32.1],[119.2,32.15],[119.41611,32.2],[119.43,32.3],[119.44306,32.39028],[119.6,32.38],[119.75,32.36],[119.90694,32.34278],[120.2,32.3],[120.5,32.2],[120.85,32.08333],[121,32],[121.1525,31.94306],[121.2,31.9],[121.24583,31.88611],[121.3,31.7],[121.4,31.5],[121.47222,31.23611],[121.49,31.45],[121.513867,31.656222]];r&&(Array.isArray(r)?r.forEach(n=>n.setMap(null)):r.setMap(null));const a=24;if(l.value===0)r=new window.AMap.Polyline({path:s,strokeColor:"#0088FF",strokeWeight:5,strokeStyle:"solid",map:e,lineJoin:"round",lineCap:"round"});else if(l.value===1){const n=new window.AMap.Polyline({path:s.slice(0,a+1),strokeColor:"#FF0000",strokeWeight:5,strokeStyle:"dashed",map:e,lineJoin:"round",lineCap:"round"}),o=new window.AMap.Polyline({path:s.slice(a),strokeColor:"#0088FF",strokeWeight:5,strokeStyle:"solid",map:e,lineJoin:"round",lineCap:"round"});r=[n,o]}else l.value===2&&(r=new window.AMap.Polyline({path:s,strokeColor:"#FF0000",strokeWeight:5,strokeStyle:"dashed",map:e,lineJoin:"round",lineCap:"round"}))},E=()=>{if(!m)return;const s=I[l.value].portIndex,a=[[114.30546,30.593099],[114.5,30.58],[114.87083,30.49556],[114.9,30.35],[115.025,30.21333],[115.3,30],[115.5,29.85],[115.895,29.71361],[116.2,29.9],[116.5,30.1],[116.8,30.3],[117.03639,30.51611],[117.4,30.7],[117.6,30.85],[117.81028,30.93917],[117.82,31.05],[117.82611,31.265],[118,31.3],[118.15,31.32],[118.38472,31.33694],[118.35,31.38],[118.27972,31.41417],[118.35,31.55],[118.492839,31.678246],[118.6,31.85],[118.76556,32.06417],[119,32.1],[119.2,32.15],[119.41611,32.2],[119.43,32.3],[119.44306,32.39028],[119.6,32.38],[119.75,32.36],[119.90694,32.34278],[120.2,32.3],[120.5,32.2],[120.85,32.08333],[121,32],[121.1525,31.94306],[121.2,31.9],[121.24583,31.88611],[121.3,31.7],[121.4,31.5],[121.47222,31.23611],[121.49,31.45],[121.513867,31.656222]],n=24;let o,h;s===0?(o=[a[0]],h=a[0]):s===1?(o=a.slice(0,n+1),h=a[n]):s===2?(o=a,h=a[a.length-1]):(o=[a[0]],h=a[0]),e&&m.moveAlong?m.moveAlong(o,{speed:500,autoRotation:!0,duration:5e3}):e&&m.setPosition(h)},T=()=>{if(e){if(x.value){const s=v[0],a=e.lngLatToContainer([s.lng,s.lat]);x.value.style.left="".concat(a.x+20,"px"),x.value.style.top="".concat(a.y-50,"px")}if(P.value){const s=v[1],a=e.lngLatToContainer([s.lng,s.lat]);P.value.style.left="".concat(a.x+20,"px"),P.value.style.top="".concat(a.y-50,"px")}if(C.value){const s=v[2],a=e.lngLatToContainer([s.lng,s.lat]);C.value.style.left="".concat(a.x+20,"px"),C.value.style.top="".concat(a.y-50,"px")}}},F=(s,a)=>{s==="wuhan"?p.value.wuhan[a]=!1:s==="maanshan"&&(p.value.maanshan[a]=!1)};return j(()=>{B()}),D(()=>{e&&e.destroy()}),(s,a)=>(i(),d("div",O,[t("div",{ref_key:"mapContainer",ref:y,class:"map-container"},null,512),t("div",U,[g(w(M),{onClick:V},{default:k(()=>[b(L(w(S)==="satellite"?"切换到地图":"切换到卫星图"),1)]),_:1})]),t("div",q,[t("div",Q,[(i(),d(G,null,Z(I,(n,o)=>t("div",{key:o,class:H(["timeline-node",{active:l.value===o}]),onClick:h=>$(o)},[a[4]||(a[4]=t("div",{class:"timeline-dot"},null,-1)),t("div",Y,L(n.label),1)],10,X)),64))])]),l.value>=0?(i(),d("div",{key:0,ref_key:"wuhanPanelRef",ref:x,class:"info-panels wuhan"},[l.value===0&&(p.value.wuhan.left||p.value.wuhan.right)?(i(),d("div",aa,[p.value.wuhan.left?(i(),d("div",sa,[t("div",ea,[a[6]||(a[6]=t("h3",null,"业务信息",-1)),g(w(M),{type:"text",onClick:a[0]||(a[0]=n=>F("wuhan","left"))},{default:k(()=>[...a[5]||(a[5]=[b("隐藏",-1)])]),_:1})]),a[7]||(a[7]=f('<div class="panel-content" data-v-474d6900><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>订单号：</span><span class="value" data-v-474d6900>A0001</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>钢厂：</span><span class="value" data-v-474d6900>武汉钢厂</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>预准发号：</span><span class="value" data-v-474d6900>A10001</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>预准发数量：</span><span class="value" data-v-474d6900>100T，目的地上海</span></div></div>',1))])):c("",!0),p.value.wuhan.right?(i(),d("div",na,[t("div",ta,[a[9]||(a[9]=t("h3",null,"物流信息",-1)),g(w(M),{type:"text",onClick:a[1]||(a[1]=n=>F("wuhan","right"))},{default:k(()=>[...a[8]||(a[8]=[b("隐藏",-1)])]),_:1})]),a[10]||(a[10]=f('<div class="panel-content" data-v-474d6900><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>船名：</span><span class="value" data-v-474d6900>武汉1号</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>吨数：</span><span class="value" data-v-474d6900>120T</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>预计抵达时间：</span><span class="value" data-v-474d6900>1月16日12点</span></div></div>',1))])):c("",!0)])):l.value>0?(i(),d("div",la,[...a[11]||(a[11]=[f('<div class="info-panel merged" data-v-474d6900><div class="panel-header" data-v-474d6900><h3 data-v-474d6900>航行信息</h3></div><div class="panel-content" data-v-474d6900><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>排船计划号：</span><span class="value" data-v-474d6900>B0001</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>船名：</span><span class="value" data-v-474d6900>武汉1号</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>预计抵达时间：</span><span class="value" data-v-474d6900>1月16日12时</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>预计装货吨位：</span><span class="value" data-v-474d6900>100吨</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>关联预准发号：</span><span class="value" data-v-474d6900>A10001</span></div></div></div>',1)])])):c("",!0)],512)):c("",!0),l.value>=1?(i(),d("div",{key:1,ref_key:"maanshanPanelRef",ref:P,class:"info-panels maanshan"},[l.value===1&&(p.value.maanshan.left||p.value.maanshan.right)?(i(),d("div",da,[p.value.maanshan.left?(i(),d("div",ia,[t("div",oa,[a[13]||(a[13]=t("h3",null,"业务信息",-1)),g(w(M),{type:"text",onClick:a[2]||(a[2]=n=>F("maanshan","left"))},{default:k(()=>[...a[12]||(a[12]=[b("隐藏",-1)])]),_:1})]),a[14]||(a[14]=f('<div class="panel-content" data-v-474d6900><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>母船批号：</span><span class="value" data-v-474d6900>C0001</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>船名：</span><span class="value" data-v-474d6900>武汉1号</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>发货时间：</span><span class="value" data-v-474d6900>1月16日16时</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>装货吨位：</span><span class="value" data-v-474d6900>102吨 目的地上海</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>关联预准发号：</span><span class="value" data-v-474d6900>A10001</span></div></div>',1))])):c("",!0),p.value.maanshan.right?(i(),d("div",va,[t("div",pa,[a[16]||(a[16]=t("h3",null,"物流信息",-1)),g(w(M),{type:"text",onClick:a[3]||(a[3]=n=>F("maanshan","right"))},{default:k(()=>[...a[15]||(a[15]=[b("隐藏",-1)])]),_:1})]),a[17]||(a[17]=f('<div class="panel-content" data-v-474d6900><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>排船计划号：</span><span class="value" data-v-474d6900>F0001</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>船名：</span><span class="value" data-v-474d6900>武汉1号</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>预计抵达时间：</span><span class="value" data-v-474d6900>1月19日12时</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>预计装货吨位：</span><span class="value" data-v-474d6900>300吨</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>关联预准发号：</span><span class="value" data-v-474d6900>E10001</span></div></div>',1))])):c("",!0)])):l.value>1?(i(),d("div",ra,[...a[18]||(a[18]=[f('<div class="info-panel merged" data-v-474d6900><div class="panel-header" data-v-474d6900><h3 data-v-474d6900>航行信息</h3></div><div class="panel-content" data-v-474d6900><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>子船批号：</span><span class="value" data-v-474d6900>S001</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>船名：</span><span class="value" data-v-474d6900>武汉1号</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>预计到货时间：</span><span class="value" data-v-474d6900>1月20日12点</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>装货吨位：</span><span class="value" data-v-474d6900>402吨 目的地上海</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>关联母船批号：</span><span class="value" data-v-474d6900>C0001、G0001</span></div></div></div>',1)])])):c("",!0)],512)):c("",!0),l.value>=2?(i(),d("div",{key:2,ref_key:"shanghaiPanelRef",ref:C,class:"info-panels shanghai"},[...a[19]||(a[19]=[f('<div class="info-panel single" data-v-474d6900><div class="panel-header" data-v-474d6900><h3 data-v-474d6900>港口信息</h3></div><div class="panel-content" data-v-474d6900><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>子船批号：</span><span class="value" data-v-474d6900>S001</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>船名：</span><span class="value" data-v-474d6900>武汉1号</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>卸货时间：</span><span class="value" data-v-474d6900>1月20日8点</span></div><div class="info-item" data-v-474d6900><span class="label" data-v-474d6900>港口实收库存：</span><span class="value" data-v-474d6900>402吨/15件</span></div></div></div>',1)])],512)):c("",!0)]))}}),ya=K(ca,[["__scopeId","data-v-474d6900"]]);export{ya as default};
