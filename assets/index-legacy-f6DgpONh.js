System.register(["./_plugin-vue_export-helper-legacy-DDvuJ2jJ.js","./order-legacy-DiYmr54A.js","./vue-vendor-legacy-DBuN8sLc.js","./ant-design-legacy-D-0iCT7D.js","./utils-legacy-CnximVHY.js"],function(e,t){"use strict";var a,l,n,o,r,i,u,d,c,s,p,m,f,g,y,h,v,k,_,w;return{setters:[e=>{a=e._},e=>{l=e.o},e=>{n=e.d,o=e.f,r=e.r,i=e.o,u=e._,d=e.k,c=e.W,s=e.U,p=e.V,m=e.G,f=e.S,g=e.a2,y=e.a3,h=e.u,v=e.$},e=>{k=e.h,_=e.m,w=e.n},null],execute:function(){var t=document.createElement("style");t.textContent=".order-page .search-form[data-v-4e0fb827]{margin-bottom:16px}\n/*$vite$:1*/",document.head.appendChild(t);const x={class:"order-page"},C={key:1};e("default",a(n({__name:"index",setup(e){const t=v(),a=o(!1),n=o([]),N=r({status:void 0,customerName:void 0}),b=r({current:1,pageSize:10,total:0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条`}),z=[{title:"订单编号",dataIndex:"id",key:"id",width:150},{title:"客户名称",dataIndex:"customerName",key:"customerName",width:200},{title:"产品名称",dataIndex:"productName",key:"productName",width:150},{title:"数量",key:"quantity",width:120,customRender:({record:e})=>`${e.quantity} ${e.unit}`},{title:"总金额",key:"totalAmount",width:150},{title:"状态",key:"status",width:120},{title:"下单日期",dataIndex:"orderDate",key:"orderDate",width:120},{title:"交货日期",dataIndex:"deliveryDate",key:"deliveryDate",width:120},{title:"操作",key:"action",width:200,fixed:"right"}];async function S(){a.value=!0;try{const e={page:b.current,pageSize:b.pageSize,status:N.status,customerName:N.customerName},t=await l.getOrders(e);200===t.code&&(n.value=t.data.list,b.total=t.data.total)}catch(e){console.error("获取订单列表失败",e),k.error("获取订单列表失败")}finally{a.value=!1}}function $(){b.current=1,S()}function D(){N.status=void 0,N.customerName=void 0,b.current=1,S()}function I(e){b.current=e.current,b.pageSize=e.pageSize,S()}function j(){t.push("/order/create")}function A(e){return{pending:"待确认",confirmed:"已确认",producing:"生产中",warehousing:"集货中",transporting:"运输中",shipped:"已发货",completed:"已完成",cancelled:"已取消"}[e]||e}return i(()=>{S()}),(e,o)=>{const r=s("a-button"),i=s("a-select-option"),v=s("a-select"),O=s("a-form-item"),U=s("a-input"),q=s("a-form"),F=s("a-tag"),E=s("a-space"),G=s("a-table"),L=s("a-card");return p(),u("div",x,[d(L,{title:"订单管理",bordered:!1},{extra:c(()=>[d(r,{type:"primary",onClick:j},{icon:c(()=>[d(h(_))]),default:c(()=>[o[2]||(o[2]=m(" 新建订单 ",-1))]),_:1})]),default:c(()=>[d(q,{layout:"inline",model:N,class:"search-form"},{default:c(()=>[d(O,{label:"订单状态"},{default:c(()=>[d(v,{value:N.status,"onUpdate:value":o[0]||(o[0]=e=>N.status=e),placeholder:"请选择状态","allow-clear":"",style:{width:"150px"}},{default:c(()=>[d(i,{value:"pending"},{default:c(()=>[...o[3]||(o[3]=[m("待确认",-1)])]),_:1}),d(i,{value:"confirmed"},{default:c(()=>[...o[4]||(o[4]=[m("已确认",-1)])]),_:1}),d(i,{value:"producing"},{default:c(()=>[...o[5]||(o[5]=[m("生产中",-1)])]),_:1}),d(i,{value:"warehousing"},{default:c(()=>[...o[6]||(o[6]=[m("集货中",-1)])]),_:1}),d(i,{value:"transporting"},{default:c(()=>[...o[7]||(o[7]=[m("运输中",-1)])]),_:1}),d(i,{value:"shipped"},{default:c(()=>[...o[8]||(o[8]=[m("已发货",-1)])]),_:1}),d(i,{value:"completed"},{default:c(()=>[...o[9]||(o[9]=[m("已完成",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),d(O,{label:"客户名称"},{default:c(()=>[d(U,{value:N.customerName,"onUpdate:value":o[1]||(o[1]=e=>N.customerName=e),placeholder:"请输入客户名称","allow-clear":""},null,8,["value"])]),_:1}),d(O,null,{default:c(()=>[d(r,{type:"primary",onClick:$},{default:c(()=>[...o[10]||(o[10]=[m("查询",-1)])]),_:1}),d(r,{style:{"margin-left":"8px"},onClick:D},{default:c(()=>[...o[11]||(o[11]=[m("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),d(G,{columns:z,"data-source":n.value,loading:a.value,pagination:b,onChange:I,"row-key":"id",style:{"margin-top":"16px"}},{bodyCell:c(({column:e,record:a})=>{return["status"===e.key?(p(),f(F,{key:0,color:(i=a.status,{pending:"default",confirmed:"blue",producing:"processing",warehousing:"orange",transporting:"cyan",shipped:"purple",completed:"success",cancelled:"error"}[i]||"default")},{default:c(()=>[m(y(A(a.status)),1)]),_:2},1032,["color"])):"totalAmount"===e.key?(p(),u("span",C,"¥"+y((n=a.totalAmount,n.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}))),1)):"action"===e.key?(p(),f(E,{key:2},{default:c(()=>[d(r,{type:"link",size:"small",onClick:e=>function(e){t.push(`/order/detail/${e.id}`)}(a)},{default:c(()=>[...o[12]||(o[12]=[m("查看",-1)])]),_:1},8,["onClick"]),d(r,{type:"link",size:"small",onClick:e=>function(e){t.push(`/tracking/${e.id}`)}(a)},{default:c(()=>[...o[13]||(o[13]=[m("追踪",-1)])]),_:1},8,["onClick"]),"pending"===a.status?(p(),f(r,{key:0,type:"link",size:"small",danger:"",onClick:e=>function(e){w.confirm({title:"确认取消",content:`确定要取消订单 ${e.id} 吗？`,onOk:async()=>{try{200===(await l.cancelOrder(e.id)).code&&(k.success("取消成功"),S())}catch(t){console.error("取消订单失败",t),k.error("取消订单失败")}}})}(a)},{default:c(()=>[...o[14]||(o[14]=[m(" 取消 ",-1)])]),_:1},8,["onClick"])):g("",!0)]),_:2},1024)):g("",!0)];var n,i}),_:1},8,["data-source","loading","pagination"])]),_:1})])}}}),[["__scopeId","data-v-4e0fb827"]]))}}});
