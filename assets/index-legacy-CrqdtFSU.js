System.register(["./request-legacy-DgrEakAZ.js","./order-legacy-C_-z8yfY.js","./vue-vendor-legacy-CbULZcsl.js","./ant-design-legacy-BYcnYbwI.js","./_plugin-vue_export-helper-legacy-BVIICed7.js","./utils-legacy-DaJqaYpr.js"],function(e,t){"use strict";var a,l,n,o,r,i,u,d,c,s,p,m,f,g,y,h,v,k,_,w;return{setters:[null,e=>{a=e.o},e=>{l=e.d,n=e.f,o=e.r,r=e.o,i=e._,u=e.k,d=e.W,c=e.U,s=e.V,p=e.G,m=e.S,f=e.a3,g=e.a4,y=e.u,h=e.$},e=>{v=e.k,k=e.r,_=e.s},e=>{w=e._},null],execute:function(){var t=document.createElement("style");t.textContent=".order-page .search-form[data-v-4e0fb827]{margin-bottom:16px}\n/*$vite$:1*/",document.head.appendChild(t);const x={class:"order-page"},C={key:1};e("default",w(l({__name:"index",setup(e){const t=h(),l=n(!1),w=n([]),N=o({status:void 0,customerName:void 0}),b=o({current:1,pageSize:10,total:0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条`}),z=[{title:"订单编号",dataIndex:"id",key:"id",width:150},{title:"客户名称",dataIndex:"customerName",key:"customerName",width:200},{title:"产品名称",dataIndex:"productName",key:"productName",width:150},{title:"数量",key:"quantity",width:120,customRender:({record:e})=>`${e.quantity} ${e.unit}`},{title:"总金额",key:"totalAmount",width:150},{title:"状态",key:"status",width:120},{title:"下单日期",dataIndex:"orderDate",key:"orderDate",width:120},{title:"交货日期",dataIndex:"deliveryDate",key:"deliveryDate",width:120},{title:"操作",key:"action",width:200,fixed:"right"}];async function S(){l.value=!0;try{const e={page:b.current,pageSize:b.pageSize,status:N.status,customerName:N.customerName},t=await a.getOrders(e);200===t.code&&(w.value=t.data.list,b.total=t.data.total)}catch(e){console.error("获取订单列表失败",e),v.error("获取订单列表失败")}finally{l.value=!1}}function $(){b.current=1,S()}function j(){N.status=void 0,N.customerName=void 0,b.current=1,S()}function D(e){b.current=e.current,b.pageSize=e.pageSize,S()}function I(){t.push("/order/create")}function q(e){return{pending:"待确认",confirmed:"已确认",producing:"生产中",warehousing:"集货中",transporting:"运输中",shipped:"已发货",completed:"已完成",cancelled:"已取消"}[e]||e}return r(()=>{S()}),(e,n)=>{const o=c("a-button"),r=c("a-select-option"),h=c("a-select"),A=c("a-form-item"),O=c("a-input"),U=c("a-form"),F=c("a-tag"),E=c("a-space"),G=c("a-table"),L=c("a-card");return s(),i("div",x,[u(L,{title:"订单管理",bordered:!1},{extra:d(()=>[u(o,{type:"primary",onClick:I},{icon:d(()=>[u(y(k))]),default:d(()=>[n[2]||(n[2]=p(" 新建订单 ",-1))]),_:1})]),default:d(()=>[u(U,{layout:"inline",model:N,class:"search-form"},{default:d(()=>[u(A,{label:"订单状态"},{default:d(()=>[u(h,{value:N.status,"onUpdate:value":n[0]||(n[0]=e=>N.status=e),placeholder:"请选择状态","allow-clear":"",style:{width:"150px"}},{default:d(()=>[u(r,{value:"pending"},{default:d(()=>[...n[3]||(n[3]=[p("待确认",-1)])]),_:1}),u(r,{value:"confirmed"},{default:d(()=>[...n[4]||(n[4]=[p("已确认",-1)])]),_:1}),u(r,{value:"producing"},{default:d(()=>[...n[5]||(n[5]=[p("生产中",-1)])]),_:1}),u(r,{value:"warehousing"},{default:d(()=>[...n[6]||(n[6]=[p("集货中",-1)])]),_:1}),u(r,{value:"transporting"},{default:d(()=>[...n[7]||(n[7]=[p("运输中",-1)])]),_:1}),u(r,{value:"shipped"},{default:d(()=>[...n[8]||(n[8]=[p("已发货",-1)])]),_:1}),u(r,{value:"completed"},{default:d(()=>[...n[9]||(n[9]=[p("已完成",-1)])]),_:1})]),_:1},8,["value"])]),_:1}),u(A,{label:"客户名称"},{default:d(()=>[u(O,{value:N.customerName,"onUpdate:value":n[1]||(n[1]=e=>N.customerName=e),placeholder:"请输入客户名称","allow-clear":""},null,8,["value"])]),_:1}),u(A,null,{default:d(()=>[u(o,{type:"primary",onClick:$},{default:d(()=>[...n[10]||(n[10]=[p("查询",-1)])]),_:1}),u(o,{style:{"margin-left":"8px"},onClick:j},{default:d(()=>[...n[11]||(n[11]=[p("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),u(G,{columns:z,"data-source":w.value,loading:l.value,pagination:b,onChange:D,"row-key":"id",style:{"margin-top":"16px"}},{bodyCell:d(({column:e,record:l})=>{return["status"===e.key?(s(),m(F,{key:0,color:(c=l.status,{pending:"default",confirmed:"blue",producing:"processing",warehousing:"orange",transporting:"cyan",shipped:"purple",completed:"success",cancelled:"error"}[c]||"default")},{default:d(()=>[p(g(q(l.status)),1)]),_:2},1032,["color"])):"totalAmount"===e.key?(s(),i("span",C,"¥"+g((r=l.totalAmount,r.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2}))),1)):"action"===e.key?(s(),m(E,{key:2},{default:d(()=>[u(o,{type:"link",size:"small",onClick:e=>function(e){t.push(`/order/detail/${e.id}`)}(l)},{default:d(()=>[...n[12]||(n[12]=[p("查看",-1)])]),_:1},8,["onClick"]),u(o,{type:"link",size:"small",onClick:e=>function(e){t.push(`/tracking/${e.id}`)}(l)},{default:d(()=>[...n[13]||(n[13]=[p("追踪",-1)])]),_:1},8,["onClick"]),"pending"===l.status?(s(),m(o,{key:0,type:"link",size:"small",danger:"",onClick:e=>function(e){_.confirm({title:"确认取消",content:`确定要取消订单 ${e.id} 吗？`,onOk:async()=>{try{200===(await a.cancelOrder(e.id)).code&&(v.success("取消成功"),S())}catch(t){console.error("取消订单失败",t),v.error("取消订单失败")}}})}(l)},{default:d(()=>[...n[14]||(n[14]=[p(" 取消 ",-1)])]),_:1},8,["onClick"])):f("",!0)]),_:2},1024)):f("",!0)];var r,c}),_:1},8,["data-source","loading","pagination"])]),_:1})])}}}),[["__scopeId","data-v-4e0fb827"]]))}}});
