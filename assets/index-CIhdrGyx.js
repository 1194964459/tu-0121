import{u as G}from"./user-BfL9ETg1.js";import{_ as W}from"./_plugin-vue_export-helper-I3Oswwaa.js";import{h as m}from"./ant-design-Ce2DOam0.js";import{d as j,f as i,r as b,o as q,_ as F,k as a,W as t,U as o,V as I,S as H,a2 as J,G as d}from"./vue-vendor-DGayM9PE.js";import"./utils-BsVK5D5E.js";const K={class:"user-page"},L=j({__name:"index",setup(P){const p=i(!1),c=i([]),u=i(!1),_=i("添加用户"),f=i(null),l=b({name:"",email:"",role:"user"}),U=[{title:"ID",dataIndex:"id",key:"id"},{title:"姓名",dataIndex:"name",key:"name"},{title:"邮箱",dataIndex:"email",key:"email"},{title:"角色",dataIndex:"role",key:"role"},{title:"操作",key:"action"}],r=b({current:1,pageSize:10,total:0});function w(n){r.current=n.current,r.pageSize=n.pageSize,v()}function z(){_.value="添加用户",f.value=null,l.name="",l.email="",l.role="user",u.value=!0}function S(n){_.value="编辑用户",f.value=n.id,l.name=n.name,l.email=n.email,l.role=n.role,u.value=!0}function V(n){m.success("删除用户: ".concat(n.name))}function M(){f.value?m.success("更新用户成功"):m.success("添加用户成功"),u.value=!1,v()}function B(){u.value=!1}async function v(){p.value=!0;try{const n=await G.getUsers();c.value=n.data||[],r.total=c.value.length}catch(n){m.error("获取用户列表失败")}finally{p.value=!1}}return q(()=>{v()}),(n,e)=>{const k=o("a-button"),N=o("a-space"),T=o("a-table"),$=o("a-card"),g=o("a-input"),y=o("a-form-item"),C=o("a-select-option"),A=o("a-select"),D=o("a-form"),E=o("a-modal");return I(),F("div",K,[a($,{title:"用户管理"},{extra:t(()=>[a(k,{type:"primary",onClick:z},{default:t(()=>[...e[4]||(e[4]=[d("添加用户",-1)])]),_:1})]),default:t(()=>[a(T,{columns:U,"data-source":c.value,loading:p.value,pagination:r,"row-key":"id",onChange:w},{bodyCell:t(({column:s,record:x})=>[s.key==="action"?(I(),H(N,{key:0},{default:t(()=>[a(k,{type:"link",size:"small",onClick:O=>S(x)},{default:t(()=>[...e[5]||(e[5]=[d("编辑",-1)])]),_:1},8,["onClick"]),a(k,{type:"link",size:"small",danger:"",onClick:O=>V(x)},{default:t(()=>[...e[6]||(e[6]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:2},1024)):J("",!0)]),_:1},8,["data-source","loading","pagination"])]),_:1}),a(E,{open:u.value,"onUpdate:open":e[3]||(e[3]=s=>u.value=s),title:_.value,onOk:M,onCancel:B},{default:t(()=>[a(D,{model:l,"label-col":{span:4},"wrapper-col":{span:20}},{default:t(()=>[a(y,{label:"姓名"},{default:t(()=>[a(g,{value:l.name,"onUpdate:value":e[0]||(e[0]=s=>l.name=s)},null,8,["value"])]),_:1}),a(y,{label:"邮箱"},{default:t(()=>[a(g,{value:l.email,"onUpdate:value":e[1]||(e[1]=s=>l.email=s)},null,8,["value"])]),_:1}),a(y,{label:"角色"},{default:t(()=>[a(A,{value:l.role,"onUpdate:value":e[2]||(e[2]=s=>l.role=s)},{default:t(()=>[a(C,{value:"admin"},{default:t(()=>[...e[7]||(e[7]=[d("管理员",-1)])]),_:1}),a(C,{value:"user"},{default:t(()=>[...e[8]||(e[8]=[d("普通用户",-1)])]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title"])])}}}),h=W(L,[["__scopeId","data-v-934769c5"]]);export{h as default};
