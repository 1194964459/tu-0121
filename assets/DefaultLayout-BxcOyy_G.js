import{a6 as V,f as d,c as U,d as I,w as M,S as w,W as t,U as s,V as y,k as o,a0 as i,_ as N,a3 as b,u as r,B as H,G as x,a4 as R,$,a7 as A}from"./vue-vendor-7Bu6c-F2.js";import{u as E}from"./user-CQg6in-H.js";import"./request-Cvwjr5Bj.js";import{H as T,m as j,M as F,n as G,U as P,D as W}from"./ant-design-BKv-vcWu.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-B5xa2wjr.js";const z=""+new URL("img/logo-alKEKSHC.svg",import.meta.url).href,J=V("user",()=>{const p=d(null),l=d(""),c=d(!1),f=U(()=>!!l.value),a=U(()=>{var u;return((u=p.value)==null?void 0:u.role)==="admin"});async function m(u){c.value=!0;try{const _=await E.login(u);p.value=_.data,l.value=_.data.token,localStorage.setItem("token",l.value)}finally{c.value=!1}}function g(){p.value=null,l.value="",localStorage.removeItem("token")}return{user:p,token:l,loading:c,isLoggedIn:f,isAdmin:a,login:m,logout:g}}),Q={class:"logo"},X={key:0},Y={class:"header-right"},Z=I({__name:"DefaultLayout",setup(p){const l=$(),c=A(),f=J(),a=d(!1),m=d(["/home"]),g=d([]);M(()=>c.path,v=>{const e=v.split("/").slice(0,2).join("/");m.value=[e]},{immediate:!0});function u(){a.value=!a.value}function _(v){l.push(v)}function K(){f.logout(),l.push("/login")}return(v,e)=>{const k=s("a-menu-item"),C=s("a-menu"),L=s("a-layout-sider"),O=s("a-dropdown"),h=s("a-layout-header"),B=s("router-view"),D=s("a-layout-content"),S=s("a-layout");return y(),w(S,{class:"app-layout"},{default:t(()=>[o(L,{collapsed:a.value,"onUpdate:collapsed":e[4]||(e[4]=n=>a.value=n),trigger:null,collapsible:""},{default:t(()=>[i("div",Q,[e[6]||(e[6]=i("img",{src:z,alt:"Logo",class:"logo-img"},null,-1)),a.value?b("",!0):(y(),N("h2",X,"物流供应链"))]),o(C,{"selected-keys":m.value,"onUpdate:selectedKeys":e[2]||(e[2]=n=>m.value=n),"open-keys":g.value,"onUpdate:openKeys":e[3]||(e[3]=n=>g.value=n),mode:"inline",theme:"dark","inline-collapsed":a.value},{default:t(()=>[o(k,{key:"/home",onClick:e[0]||(e[0]=n=>_("/home"))},{icon:t(()=>[o(r(T))]),default:t(()=>[e[7]||(e[7]=i("span",null,"首页",-1))]),_:1}),o(k,{key:"/order",onClick:e[1]||(e[1]=n=>_("/order"))},{icon:t(()=>[o(r(j))]),default:t(()=>[e[8]||(e[8]=i("span",null,"订单管理",-1))]),_:1})]),_:1},8,["selected-keys","open-keys","inline-collapsed"])]),_:1},8,["collapsed"]),o(S,null,{default:t(()=>[o(h,{class:"header"},{default:t(()=>[a.value?(y(),w(r(F),{key:0,class:"trigger",onClick:u})):(y(),w(r(G),{key:1,class:"trigger",onClick:u})),i("div",Y,[o(O,null,{overlay:t(()=>[o(C,null,{default:t(()=>[o(k,{key:"logout",onClick:K},{default:t(()=>[...e[9]||(e[9]=[x("退出登录",-1)])]),_:1})]),_:1})]),default:t(()=>{var n;return[i("a",{class:"ant-dropdown-link",onClick:e[5]||(e[5]=H(()=>{},["prevent"]))},[o(r(P),{style:{"margin-right":"8px"}}),x(" "+R(((n=r(f).user)==null?void 0:n.name)||"用户")+" ",1),o(r(W))])]}),_:1})])]),_:1}),o(D,{class:"content"},{default:t(()=>[o(B)]),_:1})]),_:1})]),_:1})}}}),se=q(Z,[["__scopeId","data-v-bac1e587"]]);export{se as default};
